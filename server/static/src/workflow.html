{% extends "index.html" %}

{% block main_info %}

<div class="card">
  <div class="card-header"><strong>workflow {{ workflow.id }}</strong></div>
  <table class="table table-responsive-sm table-hover table-outline mb-0">
    <thead class="thead-light">
    <tr>
      <th class="text-center">id</th>
      <th class="text-center">name</th>
      <th class="text-center">Date</th>
      <th class="text-center">Steps</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <tr>
      <td>
        {{ workflow.id }}
      </td>
      <td>
        {{ workflow.name }}
      </td>
      <td>
        <a> {{ workflow.date }} </a>
      </td>
      <td>
        {% for message in w_msg %}
        <a> {{ message.done }}/{{ message.total }} </a>
        {% endfor %}
      </td>
    </tr>
    </tbody>
  </table>
</div>

<div class="card">
  <div class="card-header">progress</div>
  <div class="card-body">
    <div class="progress">
      {% for message in w_msg %}
      {% set progress_percent = "%.2f"|format((message.done|float)/(message.total|float)*100)|string %}
      <div class="progress-bar" role="progressbar" style="width: {{ progress_percent }}%;" aria-valuenow="75"
           aria-valuemin="0" aria-valuemax="100">{{ progress_percent }}%
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<div class="card">
  <div class="card-header">jobs</div>
  <table class="table table-responsive-sm table-hover table-outline mb-0">
    <thead class="thead-light">
    <tr>
      <th class="text-center">id</th>
      <th class="text-center">name</th>
      <th class="text-center">status</th>
    </tr>
    </thead>
    <tbody>
    {% for job in get_jobs(workflow.id) %}
    <tr>
      <td>
        <a href='/workflow/{{ job.workflow_id }}/job/{{ job.jobid }}'> {{ job.jobid }} </a>
      </td>
      <td>
        <a href='/workflow/{{ job.workflow_id }}/job/{{ job.jobid }}'> {{ job.name }} </a>
      </td>
      <td>
        <a> {{ job.status }} </a>
      </td>
      {% endfor %}

    </tbody>
  </table>
</div>

{% endblock %}
